import { useLayoutEffect, useRef } from "react";
import { productDetailsData } from "../../data/productDetails.data";
import Section from "../layout/Section";
import Container from "../ui/Container";
import Button from "../ui/Button";
import { gsap } from "../../animations/gsap.config";

export default function ProductDetailsSection() {
  const sectionRef = useRef<HTMLDivElement>(null);

  const handleCTA = () => {
    const el = document.getElementById(productDetailsData.pricing.scrollTo);
    el?.scrollIntoView({ behavior: "smooth" });
  };

  useLayoutEffect(() => {
    if (!sectionRef.current) return;

    const ctx = gsap.context(() => {
      gsap.from("[data-item]", {
        scrollTrigger: {
          trigger: sectionRef.current,
          start: "top 75%",
        },
        opacity: 0,
        y: 24,
        stagger: 0.08,
      });
    }, sectionRef);

    return () => ctx.revert();
  }, []);

  return (
    <Section className="bg-white">
      <Container>
        <div ref={sectionRef}>
          {/* Title */}
          <h2 className="mb-10 text-center text-3xl font-bold font-anekBangla">
            {productDetailsData.title}
          </h2>

          {/* Items Grid */}
          <div className="grid gap-5 sm:grid-cols-3">
            {productDetailsData.items.map((item, index) => (
              <div
                key={index}
                data-item
                className={[
                  "flex items-center gap-3 rounded-xl border border-border-accent bg-gradient-to-b from-[#FEF9C2] to-[#FEFCE8] px-5 py-4",
                  item.highlight
                    ? "border-2 border-border-accent font-semibold"
                    : "",
                ].join(" ")}
              >
                {/* Icon */}
                <svg
                  className="w-6 h-6"
                  viewBox="0 0 468.008 468.008"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M429.237 115.388c-8.952-.867-18.508-2.04-28.439-3.486 15.484-25.155 13.259-58.827-19.873-91.37-49.316-48.445-93.669-3.951-123.804 58.622-4.999-1.48-9.797-2.934-14.263-4.325a43.6 43.6 0 0 0-27.251.478c-33.445-57.211-77.252-89.829-121.506-40.86-26.271 29.067-33.426 59.964-20.167 85.74a1696 1696 0 0 1-40.225 9.288C10.653 134.501-3.599 156.646.803 178.977a2369 2369 0 0 0 5.034 24.76c2.616 12.56 11.016 23.387 22.546 29.194L46.07 374.427c2.002 16.01 13.29 29.72 28.756 34.927l44.22 14.892c.556 8.803.42 8.369.885 9.004 9.862 13.465 21.23 16.738 29.957 16.738 8.175 0 14.031-2.875 14.151-2.936a2 2 0 0 0 1.092-1.899 337 337 0 0 1-.267-5.472l77.361 26.064c13.04 4.396 27.525 2.31 38.746-5.558l46.121-32.318c-.123 1.407-.243 2.76-.36 4.014-.133 1.422 1.231 2.524 2.592 2.094.926-.292 22.851-7.363 39.169-27.041.463-.558.348-.292 1.832-9.355l28.905-20.253c9.607-6.725 16.052-17.192 17.684-28.72 5.259-37.324 14.561-103.53 18.273-131.05 1.816-.952 3.525-1.853 5.092-2.682 10.342-5.475 18.045-14.996 21.132-26.121 2.149-7.718 4.024-15.164 5.575-22.131 5.508-24.66-12.035-48.744-37.749-51.236m-.385 3.981a39.22 39.22 0 0 1 23.013 10.366c-15.502 9.705-34.245 20.37-55.777 31.734-3.943-1.316-21.895-7.243-44.007-13.512 18.274-6.124 35.266-16.854 46.269-32.373 10.666 1.583 20.925 2.858 30.502 3.785M330.136 4.916c15.95-3.367 32.087 2.849 47.987 18.469 27.291 26.807 35.023 57.079 21.213 83.052-9.358 17.6-26.87 29.89-45.739 36.757-22.124 8.052-47.656 9.574-73.917 4.449-1.806-10.702-5.383-22.574-11.344-31.643q3.816-7.132 7.668-13.566c15.193 10.001 28.314 15.033 39.213 15.032 31.537-.003 37.893-42.005 35.884-73.535 21.468 1.617 35.317 18.623 35.47 18.814a2 2 0 0 0 3.13-2.491c-.741-.933-18.473-22.812-46.242-20.252-26.897 2.478-53.039 26.844-77.728 72.404-4.103-5.105-8.881-8.66-14.256-10.597 11.304-27.961 40.017-88.733 78.661-96.893M279.28 219.987a43.4 43.4 0 0 0 12.092-3.393 2096 2096 0 0 0 49.941-23.163c-.469 8.918-1.833 34.693-3.603 66.559-24.219 10.471-45.829 18.674-64.234 24.377a39.5 39.5 0 0 1-7.941 1.582zm-17.865 66.12a39.6 39.6 0 0 1-9.032-1.11c-21.397-5.263-75.894-18.637-88.015-21.613.29-33.85.627-60.991.733-69.236 39.919 10.724 75.415 19.505 98.345 25.025 4.032.973 7.85 1.294 11.675 1.16zm28.323-73.164a39.63 39.63 0 0 1-25.355 2.341c-22.358-5.382-56.673-13.868-95.382-24.232a4829 4829 0 0 1 45.248-20.45c15.26 4.517 31.704 4.093 46.785-2.317 21.196 6.4 50.922 15.232 76.771 22.391a2087 2087 0 0 1-48.067 22.267m-80.542-48.354c-.115-8.457.473-58.759 30.432-60.458 30.034-1.675 36.11 42.669 36.903 49.962-20.807 17.315-46.766 19.692-67.335 10.496m68.884-65.57c15.569-25.196 39.435-54.686 68.996-55.197.59 9.549 2.115 53.81-19.044 66.327-11.584 6.852-28.385 3.102-49.952-11.13m-36.41-20.371c4.304 1.341 8.917 2.74 13.717 4.163a363 363 0 0 0-7.784 17.904c-5.569-1.159-12.156-.802-17.843 1.629a341 341 0 0 0-12.115-23.499 39.6 39.6 0 0 1 24.025-.197M97.068 37.13c15.51-17.161 31.679-24.587 48.045-22.082 38.094 5.834 68.866 62.941 81.091 89.135-5.399 3.343-9.421 8.464-12.416 14.359-26.378-43.667-53.327-66.381-80.137-67.507-28.587-1.209-45.906 22.738-46.628 23.757a2 2 0 0 0 .475 2.787 2 2 0 0 0 2.788-.473c.146-.206 13.23-18.259 34.595-21.58-.607 29.601 6.613 70.698 36.365 70.698 11.418 0 25.194-6.086 41.138-18.167a313 313 0 0 1 9.395 14.918c-3.909 9.659-5.539 20.59-6.193 29.026C107.734 182.232 29.04 112.398 97.068 37.13m103.062 67.625c-21.152 16.075-37.889 21.099-49.771 14.917-21.346-11.111-21.642-55.226-21.458-64.591 29.419-1.827 54.489 25.547 71.229 49.674M34.561 133.383c13.9-3.03 27.817-6.25 41.405-9.572 11.657 19.393 32.674 31.133 54.988 36.244-12.946 6.522-22.502 11.874-25.152 13.376-35.537-10.35-66.121-20.127-91.001-29.085 5.331-5.522 12.105-9.294 19.76-10.963M9.753 202.919a2377 2377 0 0 1-5.026-24.718c-2.13-10.815.527-21.888 7.278-30.612 25.086 9.081 56.062 19.007 92.127 29.52.942 17.959 2.442 43.923 4.146 72.49-76.211-18.714-72.526-17.562-77.19-19.78-10.922-5.145-18.899-15.2-21.335-26.9m66.351 202.644c-14.021-4.721-24.251-17.137-26.064-31.632L32.648 234.808c3.358 1.259-1.811-.105 75.879 18.971 3.771 63.067 8.431 137.346 10.247 166.154zm86.141-215.797a1.98 1.98 0 0 0-1.104 1.719c-.117 2.942-2.613 204.44-.08 252.5-4.716 1.831-22.78 7.078-37.557-12.632-.737-11.645-11.911-188.279-15.388-254.636 3.391-1.915 14.586-8.149 29.226-15.378 22.627 3.915 45.983 1.531 67.977-5.062-.252 5.371-.117 9.079-.092 9.679.03.721.447 1.37 1.09 1.697.055.028.896.443 2.392 1.041-11.359 5.077-44.032 19.848-46.464 21.072m165.286 232.912-48.854 34.233c-10.191 7.146-23.341 9.031-35.173 5.042l-78.797-26.548c-1.167-34.979-.853-110.201-.374-167.911a258481 258481 0 0 1 87.096 21.387 43.6 43.6 0 0 0 23.227-.692c18.076-5.601 39.197-13.586 62.804-23.736-3.003 53.879-7.064 123.144-9.929 158.225m37.543-17.887c-12.117 14.396-27.72 21.74-34.071 24.298 4.844-54.895 14.519-238.497 14.47-239.089a2.2 2.2 0 0 0-.186-.7c-.894-1.856 2.12.813-78.895-23.577 4.499-2.393 9.036-5.417 13.532-9.258a2 2 0 0 0 .695-1.673 66 66 0 0 0-.318-2.953c21.205 3.956 43.384 3.969 64.626-1.73 23.669 6.54 43.806 13.132 49.25 14.94-4.445 73.417-17.783 172.959-29.103 239.742m47.88-56.743c-1.477 10.433-7.314 19.911-16.017 26.002l-25.716 18.019c4.291-26.615 13.712-87.829 20.593-152.588a1646 1646 0 0 0 39.03-19.655c-3.932 28.981-12.803 92.118-17.89 128.222m50.129-182.294c-1.535 6.9-3.394 14.278-5.524 21.93-2.795 10.072-9.775 18.694-19.149 23.657a1639 1639 0 0 1-46.102 23.45c2.437-23.429 4.519-47.216 5.884-69.909 21.844-11.535 40.835-22.358 56.5-32.197 7.866 9.115 11.009 21.348 8.391 33.069" />
                </svg>

                {/* Text */}
                <p className="text-xl font-anekBangla font-semibold">
                  {item.text}
                </p>
              </div>
            ))}
          </div>

          {/* Pricing Box */}
          <div
            data-item
            className="mx-auto mt-16 max-w-3xl rounded-2xl border-2 border-dashed border-green-600 px-6 py-10 text-center"
          >
            <h3 className="text-3xl font-semibold font-anekBangla">
              ‡¶™‡ßÅ‡¶∞‡ßã ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú‡¶ü‡¶ø ‡¶™‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡¶® ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞{" "}
              <span className="text-green-700">
                {productDetailsData.pricing.price}
              </span>{" "}
              ‡¶ü‡¶æ‡¶ï‡¶æ‡ßü
            </h3>

            <p className="mt-4 whitespace-pre-line text-text-secondary text-lg font-anekBangla">
              ‚ú® {productDetailsData.pricing.note}
            </p>

            <div data-hero-animate className="mt-6">
              <Button onClick={handleCTA} variant="premium" className="!p-4">
                <svg
                  className="w-6 h-6 md:w-8 md:h-8"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  xmlSpace="preserve"
                >
                  <path
                    fill="#ffa800"
                    d="M340.029 205.714c17.371 0 32 14.629 32 32s-14.629 32.914-32 32.914h-4.571l-8.229-.914c13.714-3.657 24.686-16.457 24.686-32 0-17.371-14.629-32-32-32m148.114 0c17.371 0 32-14.629 32-32s-14.629-32-32-32h-42.971 22.857c17.371 0 32 14.629 32 32s-13.714 32-32 32M302.543 331.886c9.143-2.743 16.457-10.057 20.114-19.2l.914-1.829c5.486-16.457-2.743-33.829-19.2-39.314l-10.057-3.657 21.943 2.743h5.485l2.743.914c16.457 5.486 24.686 23.771 19.2 39.314l-.914 1.829c-6.4 15.543-23.771 24.685-40.228 19.2m-18.286 33.828c5.486-16.457-3.657-34.743-20.114-40.229l18.286 6.4c4.571 1.829 9.143 1.829 13.714.914 8.229 8.229 11.886 21.029 8.229 32.914-5.486 16.457-23.771 25.6-40.229 20.114 9.143-2.741 17.371-10.056 20.114-20.113"
                    transform="translate(1)"
                  />
                  <path
                    fill="#ffe100"
                    d="M353.743 141.714h-153.6L210.2 153.6l-10.057-11.886c-17.371-24.686-33.829-27.429-64-27.429-42.971 0-54.857 36.571-54.857 36.571H63c-15.543 0-27.429 11.886-27.429 27.429v165.486c0 14.629 11.886 26.514 27.429 26.514h9.143c35.657 26.514 34.743 27.429 100.571 27.429 38.4 0 83.2-11.886 83.2-11.886h-10.057c16.457 5.486 34.743-3.657 40.229-20.114s-3.657-34.743-20.114-40.229l18.286 6.4c16.457 5.486 33.829-2.743 39.314-19.2l.914-1.829c5.486-16.457-2.743-33.829-19.2-39.314l-10.057-3.657 21.943 2.743h4.571c17.371 0 32-14.629 32-32.914s-13.714-32-32-32H255h194.743c17.371 0 32-14.629 32-32s-13.714-32-32-32h-22.857"
                    transform="translate(1)"
                  />
                  <path
                    fill="#fff"
                    d="M35.571 151.771H63c-15.543 0-27.429 11.886-27.429 27.429v165.486c0 14.629 11.886 26.514 27.429 26.514h9.143-36.572c-15.543 0-27.429-11.886-27.429-26.514V179.2c.001-15.543 11.887-27.429 27.429-27.429"
                    transform="translate(1)"
                  />
                  <path d="M182.857 406.857c-64 0-76.8-.914-112.457-27.429H36.571C16.457 379.429 0 363.886 0 343.771V178.286c0-20.114 16.457-36.571 36.571-36.571h32.914c9.143-10.057 38.4-36.571 76.8-36.571h.914c28.343 0 48.457 2.743 67.657 27.429h160c5.486 0 9.143 3.657 9.143 9.143s-3.657 9.143-9.143 9.143H228.571c0 .914.914 1.829.914 2.743 0 2.743-.914 5.486-3.657 7.314-3.657 3.657-10.057 2.743-12.8-.914l-10.057-11.886-.914-.914c-14.629-21.943-27.429-23.771-55.771-23.771h-.914c-37.486.914-64.914 32.914-64.914 32.914-1.829 2.743-4.571 3.657-7.314 3.657H36.571c-10.057 0-18.286 8.229-18.286 18.286v165.486c0 9.143 8.229 17.371 18.286 17.371h35.657c2.743 0 4.571 0 6.4 1.829 32.914 24.686 40.229 25.6 104.229 25.6 36.571 0 80.457-11.886 80.457-11.886 1.829-.914 3.657 0 5.486 0 12.8 4.571 25.6-1.829 29.257-13.714 1.829-5.486 1.829-11.886-.914-17.371s-7.314-10.057-12.8-11.886c-4.571-1.829-7.314-6.4-5.486-11.886 1.829-4.571 6.4-7.314 11.886-5.486l18.286 6.4c11.886 3.657 23.771-1.829 28.343-13.714l.914-1.829c1.829-5.486 1.829-11.886-.914-16.457-2.743-5.486-7.314-9.143-12.8-10.971l-10.057-3.657c-4.571-1.829-7.314-6.4-6.4-10.971s5.486-7.314 10.057-7.314l21.029 2.743h3.657c12.8 0 22.857-10.971 22.857-23.771 0-6.4-2.743-11.886-6.4-16.457-3.657-3.657-9.143-6.4-14.629-6.4l-79.543.914c-5.486 0-9.143-3.657-9.143-9.143s3.657-9.143 9.143-9.143h205.714c12.8 0 22.857-10.057 22.857-22.857s-10.057-22.857-22.857-22.857H448c-5.486 0-9.143-3.657-9.143-9.143s3.657-9.143 9.143-9.143h22.857c22.857 0 41.143 18.286 41.143 41.143s-18.286 41.143-41.143 41.143h-94.171c4.571 6.4 7.314 14.629 7.314 22.857 0 20.114-14.629 37.486-33.829 41.143.914.914 1.829 2.743 2.743 4.571 4.571 10.057 5.486 21.029 1.829 31.086l-.914.914c-5.486 16.457-21.029 27.429-37.486 27.429 2.743 8.229 2.743 18.286 0 26.514-7.314 21.029-29.257 32-50.286 26.514-10.971 1.825-49.371 10.968-83.2 10.968" />
                  <path d="M411.429 150.857c5.486 0 9.143-3.657 9.143-9.143s-3.657-9.143-9.143-9.143-9.143 3.657-9.143 9.143 3.657 9.143 9.143 9.143M277.029 396.8c-4.571 0-9.143-.914-13.714-1.829l-95.086-32.914c-21.029-7.314-32.914-31.086-25.6-52.114 7.314-21.029 31.086-32.914 52.114-25.6l95.086 32.914c21.029 7.314 32.914 31.086 25.6 52.114-5.486 16.458-21.029 27.429-38.4 27.429m-95.086-96.914c-3.657 0-7.314.914-10.057 2.743-5.486 2.743-10.057 7.314-11.886 12.8-3.657 11.886 1.829 24.686 14.629 29.257l95.086 32.914c5.486 1.829 11.886 1.829 17.371-.914s10.057-7.314 11.886-12.8c3.657-11.886-1.829-24.686-14.629-29.257l-95.086-32.914c-1.828-.915-4.571-1.829-7.314-1.829M256.914 288c-5.486 0-10.057-.914-15.543-2.743-32.914-12.8-104.229-75.886-115.2-101.486-1.829-4.571 0-10.057 4.571-11.886s10.057 0 11.886 4.571C150.857 196.571 217.6 256 248.686 268.8c8.229 2.743 18.286.914 22.857-4.571 5.486-7.314 2.743-19.2-6.4-33.829-10.057-14.629-38.4-52.114-62.171-83.2-2.743-3.657-2.743-10.057 1.829-12.8 3.657-2.743 10.057-2.743 12.8 1.829 21.943 28.343 52.114 67.657 62.171 84.114 20.114 30.171 10.971 48.457 5.486 54.857-6.401 8.229-17.372 12.8-28.344 12.8" />
                  <path d="M315.429 342.857c-4.571 0-9.143-.914-12.8-1.829l-105.143-36.571c-21.029-7.314-32-30.171-24.686-51.2l.914-1.829c2.743-6.4 6.4-12.8 12.8-17.371 3.657-2.743 8.229-2.743 11.886 0 21.029 17.371 40.229 30.171 51.2 34.743 10.971 4.571 28.343-2.743 32.914-13.714 1.829-4.571 6.4-6.4 10.971-4.571l36.571 12.8c10.057 3.657 18.286 10.971 22.857 20.114s5.486 21.029 1.829 31.086l-.914.914c-3.657 10.057-10.971 18.286-20.114 22.857-5.485 2.743-11.885 4.571-18.285 4.571M192 253.257c-.914.914-1.829 2.743-1.829 3.657l-.914 1.829c-3.657 11.886 1.829 23.771 13.714 28.343l105.143 36.571c5.486 1.829 11.886 1.829 16.457-.914 5.486-2.743 9.143-7.314 10.971-12.8l.914-1.829c1.829-5.486 1.829-11.886-.914-16.457-2.743-5.486-7.314-9.143-12.8-10.971l-29.257-10.971c-11.886 14.629-34.743 22.857-52.114 15.543-11.885-4.572-29.257-16.458-49.371-32.001m153.6 59.429" />
                </svg>{" "}
                <span className="text-base md:text-lg font-anekBangla">
                  {productDetailsData.pricing.cta}
                </span>
              </Button>
            </div>
            <div className="mt-4 inline-flex items-center gap-2 rounded-lg bg-[#1C750A33] px-4 py-3 text-base text-text-primary font-anekBangla">
              üõµ {productDetailsData.pricing.delivery}
            </div>
          </div>
        </div>
      </Container>
    </Section>
  );
}
